# 开发从表单业开始

表单是构成大的业务系统的业务单元，但要做好表单开发并不如想象中容易, 特别是刚参加工作的同学, 对业务通常不够重视, 造成在开发过程中未能专注业务逻辑本身，大量时间花在低价值的范错成本。Java编程开身就是为业务开发而生，所以如果对业务开发不感兴趣，请转向调研时间比重较高的的底层技术开发

## 数据库表设计

表单开发先从设计实体数据库表的细节中认真思考, 最低限度地减少复工成本。 

### 首先，对实体表，需从业务的角度，逐一考虑是否需要以下字段

| **Field Name**     | **Description**                                        |  是否需要  |
| ------------------ | ------------------------------------------------------ | --------- |
| id                 | **固定必要字段**                                      |           |
| name               | **实体固定必要字段** 考虑如果是实体， 即是必要的       |           |
| status             | **实体状态必要字段**, 是否需要有状态转移              |           |
| org_id             | **主表固定必要字段** 租户组织id, 用于SaaS资源隔离      |           |
| org_tag            | **主表固定必要字段** 租户组织tag, 用于SaaS资源隔离     |           |
| code               | **实体编号必要字段** (唯一字段)，常用于编号管理，如部门,会议室等     |           |
| category_id        | **分类固定必要字段** 所属分类，考虑实体是否需要分类管理 |           |
| pid                | **多层级固定必要字段** 实体本身所属父类， 考虑是否是多层级实体(如部门） |           |
| version            | 版本控制 myBatis保留字段, 用于保证多用户同时对实体修改   |           |
| create_time        | 实体创建时间，需考虑实体是否需要记录创建时间             |           |
| update_time        | 实体更新时间，需考虑实体是否需要记录更新时间             |           |
| sort_num           | 排序字段，考虑实体是否需要自定义排序                    |           |
| invalid            | 无效字段，实体是否需要有效控制(可由status控制)          |           |


#### 对实体每一个字段，需要考虑**是否必填**（如果必填，字段定义为 not null）, 是否唯一（唯一字段为 unique)，是否组合键唯一，是否有默认值。


### 数据库设计思考清楚并进行过review，并后确定 approved之后，可以通过工具生成代。
通常5分钟内即可完成CRUD代码的编写，说明即便一个简单的表单业务，写代码占用的时间比重是很小的。生成完代码，又重新回到表单的业务分析上面。


## 表单设计

表单业务 主要分为 列表和表单（新建，查看，编辑），二者从业务层面考虑有不同的责任 。

### 列表业务
列表着重展示关键业务数据（用户不关心的关联id字段无需显示），重要操作直接在列表中提供（如 与状态转移相关）

详细参见 [列表业务](https://github.com/kequandian/dev_docs/blob/master/dev/guide/%E5%88%97%E8%A1%A8%E4%B8%9A%E5%8A%A1.md)

### 表单业务
表单着重展示除列表信息外其他的详细信息，重要的字段变更不能出现在编辑表单中，如状态转换, 财务数据变更等。

表单中的新建表单与编辑表单大部分内容相同，但又有很多值得要考虑的地方，如创建时间新建表单是没有的，但编辑表单是可见而不可编辑的。 

详细参见 [表单业务](https://github.com/kequandian/dev_docs/blob/master/dev/guide/%E8%A1%A8%E5%8D%95%E4%B8%9A%E5%8A%A1.md)

