## 微服务通信

# 教训
- 两个微服务（商城微服务,会员微服务）维护同一个业务数据（邀请人），任何一方修改数据，通过RabbitMQ通知另一方，导致消息相互影响，以及消息无限循环
- 需要区分微服务间同步数据，还是外部API调用更新数据
- 消息日志不够完整，遇到问题难定位
- 没有测试模拟器，无法快速测试

# 解决之道
- 从架构上避免数据同步
- 数据同步是最佳方案情况下，避免双向同步（采用单向同步）
- 使用gateway整合数据优于 消息同步
- 数据整合查询，通过门户gateway进行数据整合
- 跨微服务数据更新，通过前端界面进行分离，根据不同数据来源向不同微服务发起修改请求
